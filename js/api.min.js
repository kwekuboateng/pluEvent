/*!
 * Start Bootstrap - SB Admin 2 v4.0.6 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2019 
 * Licensed under  (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function clickInput1(){document.getElementById("file").click()}function clickInput2(){document.getElementById("runinput").click()}function uploadLogo(){var e=new FormData,t=document.getElementById("file").files[0],n=new XMLHttpRequest;e.append("file",t),e.append("upload_preset","fy9bo9ll"),n.open("POST","https://api.cloudinary.com/v1_1/ds0zewglg/image/upload"),n.onload=()=>{if(200===n.status){document.getElementById("loading").style.display="none";var e=JSON.parse(n.response);document.getElementById("logo").src=e.secure_url,console.log(e.secure_url,"na this be logo")}else alert("Upload failed. Please try agian.")},document.getElementById("loading").style.display="inline-block",n.send(e)}function uploadProgramLineUp(){var e=new FormData,t=document.getElementById("runinput").files[0],n=new XMLHttpRequest;console.log(t,"file"),e.append("file",t),e.append("upload_preset","fy9bo9ll"),n.open("POST","https://api.cloudinary.com/v1_1/ds0zewglg/image/upload"),n.onload=()=>{if(200===n.status){document.getElementById("loading1").style.display="none";var e=JSON.parse(n.response);document.getElementById("plu").src=e.secure_url}else alert("Upload failed. Please try agian.")},document.getElementById("loading1").style.display="inline-block",n.send(e)}var baseUrl="https://marakesh-api.herokuapp.com";function createEvents(){var e=new XMLHttpRequest,t=`${baseUrl}/api/events`,n=JSON.stringify({name:document.querySelector("#eventName").value,createdBy:JSON.parse(localStorage.getItem("data")).id,logoUrl:document.querySelector("#logo").src,message:document.querySelector("#message2").value,description:document.querySelector("#description").value,submitMessage:document.querySelector("#submitMessage").value,ratingMessage:document.querySelector("#rating1").value,pluLink:document.querySelector("#plu").src});e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&201==e.status?(events=e.responseText,localStorage.setItem("events",events),document.getElementById("loading3").style.display="none",alert("Successfully created event"),window.location.href="/events.html"):4==e.readyState&&400==e.status&&alert("Please fill all fields")},document.getElementById("loading3").style.display="inline-block",e.send(n)}function getSingleEvent(e){var t=new XMLHttpRequest,n=`${baseUrl}/api/events/${e}`;t.open("GET",n,!0);const a=JSON.parse(localStorage.getItem("data")).token;t.setRequestHeader("Authorization","Bearer "+a),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(userEvent=JSON.parse(t.responseText),document.getElementById("loading").style.display="none","undefined"!=typeof Storage&&localStorage.setItem("singleEvent",JSON.stringify(userEvent)),console.log(t,"http"))},document.getElementById("loading").style.display="inline-block",t.send()}function eventTable(){var e=JSON.parse(localStorage.getItem("events"));console.log(e,"data");var t=document.createElement("table");t.id="dataTable",t.classList.add("table"),t.classList.add("table-bordered"),t.classList.add("text-center");var n=document.createElement("thead");t.appendChild(n);var a=document.createElement("tbody");t.appendChild(a);var d=document.createElement("tr"),l=document.createElement("th"),o=document.createElement("th"),i=document.createElement("th"),r=document.createElement("th"),s=document.createElement("th"),c=document.createElement("th"),p=document.createElement("th"),m=document.createElement("th");l.innerHTML="Event ID",o.innerHTML="Name",i.innerHTML="Logo",r.innerHTML="PLU Link",s.innerHTML="View Attendants",c.innerHTML="No. of Attendants",m.innerHTML="Edit Event",p.innerHTML="Attendant Page",d.appendChild(l),d.appendChild(o),d.appendChild(s),d.appendChild(c),d.appendChild(r),d.appendChild(i),d.appendChild(m),d.appendChild(p),n.appendChild(d);for(var u=0;u<e.length;u++){var g=e[u].id,h=e[u].name,y=e[u].logoUrl,E=e[u].ratingMessage,v=e[u].description,f=e[u].message,b=e[u].pluLink,C=e[u].submitMessage,S=e[u].attendants,L=document.createElement("tr"),T=document.createElement("th"),I=document.createElement("th"),w=document.createElement("th"),M=document.createElement("th"),N=document.createElement("th"),B=document.createElement("a");B.setAttribute("name","view attendant"),B.innerHTML="view attendants",B.setAttribute("onclick","window.location.href"+`="/listAttendant.html?id=${g}"`);var H=document.createElement("th"),k=document.createElement("th"),$=document.createElement("th"),O=document.createElement("input");O.setAttribute("type","button"),O.setAttribute("name","Edit"),O.setAttribute("value","Edit"),O.classList.add("btn-success"),O.setAttribute("onclick","window.location.href"+`="/edit-event.html?id=${g}&name=${h}&logoUrl=${y}&ratingMessage=${E}&submitMessage=${C}&description=${v}&message=${f}&pluLink=${b}"`);var q=document.createElement("input");q.setAttribute("type","button"),q.setAttribute("name","Open"),q.setAttribute("value","Open"),q.classList.add("btn-primary"),q.setAttribute("onclick","window.open"+`("/attendant-reg.html?id=${g}&name=${h}&logoUrl=${y}&ratingMessage=${E}&submitMessage=${C}&description=${v}&message=${f}&pluLink=${b}")`);var x=document.createElement("a");x.setAttribute("name","PLU Link"),x.innerHTML="PLU Link",x.setAttribute("target","_blank"),x.href=b;var P=document.createElement("img");P.src=y,P.width="100",P.height="70",T.appendChild(document.createTextNode(g)),I.appendChild(document.createTextNode(h)),N.appendChild(B),H.appendChild(document.createTextNode(S.length)),M.appendChild(x),w.appendChild(P),k.appendChild(O),$.appendChild(q),L.appendChild(T),L.appendChild(I),L.appendChild(N),L.appendChild(H),L.appendChild(M),L.appendChild(w),L.appendChild(k),L.appendChild($),a.appendChild(L)}document.querySelector("#eventTab").appendChild(t)}function attendentTable(){var e=JSON.parse(localStorage.getItem("singleEvent"));newData=e.attendants;var t=document.createElement("table");t.id="dataTable",t.classList.add("table"),t.classList.add("table-bordered");var n=document.createElement("thead");t.appendChild(n);var a=document.createElement("tbody");t.appendChild(a);var d=document.createElement("tr"),l=document.createElement("th"),o=document.createElement("th"),i=document.createElement("th"),r=document.createElement("th"),s=document.createElement("th");l.innerHTML="Name",o.innerHTML="Email",i.innerHTML="Phone Number",r.innerHTML="Company",s.innerHTML="Position",d.appendChild(l),d.appendChild(o),d.appendChild(i),d.appendChild(r),d.appendChild(s),n.appendChild(d);for(var c=0;c<newData.length;c++){var p=newData[c].name,m=newData[c].email,u=newData[c].phoneNumber,g=newData[c].position,h=newData[c].organisation,y=document.createElement("tr"),E=document.createElement("th"),v=document.createElement("th"),f=document.createElement("th"),b=document.createElement("th"),C=document.createElement("th");E.appendChild(document.createTextNode(p)),v.appendChild(document.createTextNode(m)),f.appendChild(document.createTextNode(u)),b.appendChild(document.createTextNode(g)),C.appendChild(document.createTextNode(h)),y.appendChild(E),y.appendChild(v),y.appendChild(f),y.appendChild(C),y.appendChild(b),a.appendChild(y)}document.querySelector("#eventTab").appendChild(t)}function login(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/login`,n=JSON.stringify({email:document.getElementById("exampleLoginEmail").value,password:document.getElementById("exampleLoginPassword").value});console.log(n,"params"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&200==e.status?(data=e.responseText,document.getElementById("loading").innerHTML="","undefined"!=typeof Storage&&localStorage.setItem("data",data),window.location.href="/events.html",console.log(e,"data")):4==e.readyState&&400==e.status&&(document.getElementById("loading").style.display="none",alert("Please enter correct credentials and try again"))},document.getElementById("loading").style.display="inline-block",e.send(n)}function logout(){localStorage.clear(),window.location.href="/"}function register(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/register`,n=JSON.stringify({name:document.getElementById("exampleInputName").value,email:document.getElementById("exampleInputEmail").value,password:document.getElementById("exampleInputPassword").value});console.log(n,"params"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&201==e.status?(data=e.responseText,document.getElementById("loading").innerHTML="none",alert("successfully created account."),window.location.href="/index.html",console.log(e,"data")):alert("ooops. Please fill all fields and try again")},document.getElementById("loading").style.display="inline-block",e.send(n)}function getEvents(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/${JSON.parse(localStorage.getItem("data")).id}`;e.open("GET",t,!0);const n=JSON.parse(localStorage.getItem("data")).token;e.setRequestHeader("Authorization","Bearer "+n),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(userEvents=JSON.parse(e.responseText),events=userEvents.events,document.getElementById("loading3").style.display="none","undefined"!=typeof Storage&&localStorage.setItem("events",JSON.stringify(events)))},document.getElementById("loading3").style.display="inline-block",e.send()}