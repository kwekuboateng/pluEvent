/*!
 * Start Bootstrap - SB Admin 2 v4.0.6 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2019 
 * Licensed under  (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function clickInput1(){document.getElementById("file").click()}function clickInput2(){document.getElementById("runinput").click()}function uploadLogo(){var e=new FormData,t=document.getElementById("file").files[0],n=new XMLHttpRequest;e.append("file",t),e.append("upload_preset","fy9bo9ll"),n.open("POST","https://api.cloudinary.com/v1_1/ds0zewglg/image/upload"),n.onload=()=>{if(200===n.status){document.getElementById("loading").style.display="none";var e=JSON.parse(n.response);document.getElementById("logo").src=e.secure_url,console.log(e.secure_url,"na this be logo")}else alert("Upload failed. Please try agian.")},document.getElementById("loading").style.display="inline-block",n.send(e)}function uploadProgramLineUp(){var e=new FormData,t=document.getElementById("runinput").files[0],n=new XMLHttpRequest;console.log(t,"file"),e.append("file",t),e.append("upload_preset","fy9bo9ll"),n.open("POST","https://api.cloudinary.com/v1_1/ds0zewglg/image/upload"),n.onload=()=>{if(200===n.status){document.getElementById("loading1").style.display="none";var e=JSON.parse(n.response);document.getElementById("plu").src=e.secure_url}else alert("Upload failed. Please try agian.")},document.getElementById("loading1").style.display="inline-block",n.send(e)}var baseUrl="https://marakesh-api.herokuapp.com";function createEvents(){var e=new XMLHttpRequest,t=`${baseUrl}/api/events`,n=JSON.stringify({name:document.querySelector("#eventName").value,createdBy:JSON.parse(localStorage.getItem("data")).id,logoUrl:document.querySelector("#logo").src,message:document.querySelector("#message2").value,description:document.querySelector("#description").value,submitMessage:document.querySelector("#submitMessage").value,ratingMessage:document.querySelector("#rating1").value,pluLink:document.querySelector("#plu").src});e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&201==e.status?(events=e.responseText,localStorage.setItem("events",events),document.getElementById("loading3").style.display="none",alert("Successfully created event"),window.location.href="/events.html"):4==e.readyState&&400==e.status&&alert("Please fill all fields")},document.getElementById("loading3").style.display="inline-block",e.send(n)}function getSingleEvent(e){var t=new XMLHttpRequest,n=`${baseUrl}/api/events/${e}`;t.open("GET",n,!0);const a=JSON.parse(localStorage.getItem("data")).token;t.setRequestHeader("Authorization","Bearer "+a),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(userEvent=JSON.parse(t.responseText),document.getElementById("loading").style.display="none","undefined"!=typeof Storage&&localStorage.setItem("singleEvent",JSON.stringify(userEvent)),console.log(t,"http"))},document.getElementById("loading").style.display="inline-block",t.send()}function eventTable(){var e=JSON.parse(localStorage.getItem("events"));console.log(e,"data");var t=document.createElement("table");t.id="dataTable",t.classList.add("table"),t.classList.add("table-bordered"),t.classList.add("text-center");var n=document.createElement("thead");t.appendChild(n);var a=document.createElement("tbody");t.appendChild(a);var d=document.createElement("tr"),l=(document.createElement("th"),document.createElement("th")),o=document.createElement("th"),s=document.createElement("th"),i=document.createElement("th"),r=document.createElement("th"),c=document.createElement("th"),p=document.createElement("th");l.innerHTML="Name",o.innerHTML="Message",s.innerHTML="View Attendants",i.innerHTML="No. of Attendants",c.innerHTML="Submit Message",p.innerHTML="Edit Event",r.innerHTML="Attendant Page",d.appendChild(l),d.appendChild(o),d.appendChild(s),d.appendChild(i),d.appendChild(c),d.appendChild(p),d.appendChild(r),n.appendChild(d);for(var m=0;m<e.length;m++){var u=e[m].id,g=e[m].name,h=e[m].logoUrl,y=e[m].ratingMessage,E=e[m].description,v=e[m].message,f=e[m].pluLink,b=e[m].submitMessage,S=e[m].attendants,C=document.createElement("tr"),T=document.createElement("th"),I=document.createElement("th"),w=document.createElement("th"),L=document.createElement("a");L.setAttribute("name","view attendant"),L.innerHTML="view attendants",L.setAttribute("onclick","window.location.href"+`="/listAttendant.html?id=${u}"`);var M=document.createElement("th"),N=document.createElement("th"),B=document.createElement("th"),H=document.createElement("th"),$=document.createElement("input");$.setAttribute("type","button"),$.setAttribute("name","Edit"),$.setAttribute("value","Edit"),$.classList.add("btn-success"),$.setAttribute("onclick","window.location.href"+`="/edit-event.html?id=${u}&name=${g}&logoUrl=${h}&ratingMessage=${y}&submitMessage=${b}&description=${E}&message=${v}&pluLink=${f}"`);var k=document.createElement("input");k.setAttribute("type","button"),k.setAttribute("name","Open"),k.setAttribute("value","Open"),k.classList.add("btn-primary"),k.setAttribute("onclick","window.open"+`("/attendant-reg.html?id=${u}&name=${g}&logoUrl=${h}&ratingMessage=${y}&submitMessage=${b}&description=${E}&message=${v}&pluLink=${f}")`),T.appendChild(document.createTextNode(g)),I.appendChild(document.createTextNode(v)),w.appendChild(L),M.appendChild(document.createTextNode(S.length)),N.appendChild(document.createTextNode(b)),B.appendChild($),H.appendChild(k),C.appendChild(T),C.appendChild(I),C.appendChild(w),C.appendChild(M),C.appendChild(N),C.appendChild(B),C.appendChild(H),a.appendChild(C)}document.querySelector("#eventTab").appendChild(t)}function attendentTable(){var e=JSON.parse(localStorage.getItem("singleEvent"));newData=e.attendants;var t=document.createElement("table");t.id="dataTable",t.classList.add("table"),t.classList.add("table-bordered");var n=document.createElement("thead");t.appendChild(n);var a=document.createElement("tbody");t.appendChild(a);var d=document.createElement("tr"),l=document.createElement("th"),o=document.createElement("th"),s=document.createElement("th"),i=document.createElement("th"),r=document.createElement("th");l.innerHTML="Name",o.innerHTML="Email",s.innerHTML="Phone Number",i.innerHTML="Company",r.innerHTML="Position",d.appendChild(l),d.appendChild(o),d.appendChild(s),d.appendChild(i),d.appendChild(r),n.appendChild(d);for(var c=0;c<newData.length;c++){var p=newData[c].name,m=newData[c].email,u=newData[c].phoneNumber,g=newData[c].position,h=newData[c].organisation,y=document.createElement("tr"),E=document.createElement("th"),v=document.createElement("th"),f=document.createElement("th"),b=document.createElement("th"),S=document.createElement("th");E.appendChild(document.createTextNode(p)),v.appendChild(document.createTextNode(m)),f.appendChild(document.createTextNode(u)),b.appendChild(document.createTextNode(g)),S.appendChild(document.createTextNode(h)),y.appendChild(E),y.appendChild(v),y.appendChild(f),y.appendChild(S),y.appendChild(b),a.appendChild(y)}document.querySelector("#eventTab").appendChild(t)}function login(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/login`,n=JSON.stringify({email:document.getElementById("exampleLoginEmail").value,password:document.getElementById("exampleLoginPassword").value});console.log(n,"params"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&200==e.status?(data=e.responseText,document.getElementById("loading").innerHTML="","undefined"!=typeof Storage&&localStorage.setItem("data",data),window.location.href="/events.html",console.log(e,"data")):4==e.readyState&&400==e.status&&(document.getElementById("loading").style.display="none",alert("Please enter correct credentials and try again"))},document.getElementById("loading").style.display="inline-block",e.send(n)}function logout(){localStorage.clear(),window.location.href="/"}function register(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/register`,n=JSON.stringify({name:document.getElementById("exampleInputName").value,email:document.getElementById("exampleInputEmail").value,password:document.getElementById("exampleInputPassword").value});console.log(n,"params"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&201==e.status?(data=e.responseText,document.getElementById("loading").innerHTML="none",alert("successfully created account."),window.location.href="/index.html",console.log(e,"data")):alert("ooops. Please fill all fields and try again")},document.getElementById("loading").style.display="inline-block",e.send(n)}function getEvents(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/${JSON.parse(localStorage.getItem("data")).id}`;e.open("GET",t,!0);const n=JSON.parse(localStorage.getItem("data")).token;e.setRequestHeader("Authorization","Bearer "+n),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(userEvents=JSON.parse(e.responseText),events=userEvents.events,document.getElementById("loading3").style.display="none","undefined"!=typeof Storage&&localStorage.setItem("events",JSON.stringify(events)))},document.getElementById("loading3").style.display="inline-block",e.send()}