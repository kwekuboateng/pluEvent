/*!
 * Start Bootstrap - SB Admin 2 v4.0.6 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2019 
 * Licensed under  (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function clickInput1(){document.getElementById("file").click()}function clickInput2(){document.getElementById("runinput").click()}function uploadLogo(){var e=new FormData,t=document.getElementById("file").files[0],n=new XMLHttpRequest;console.log(t,"file"),e.append("file",t),e.append("upload_preset","fy9bo9ll"),n.open("POST","https://api.cloudinary.com/v1_1/ds0zewglg/image/upload"),n.onload=()=>{if(200===n.status){document.getElementById("loading").style.display="none";var e=JSON.parse(n.response);document.getElementById("logo").src=e.secure_url,console.log(e.secure_url,"na this be logo")}else alert("Upload failed. Please try agian.")},document.getElementById("loading").style.display="inline-block",n.send(e)}function uploadProgramLineUp(){var e=new FormData,t=document.getElementById("runinput").files[0],n=new XMLHttpRequest;console.log(t,"file"),e.append("file",t),e.append("upload_preset","fy9bo9ll"),n.open("POST","https://api.cloudinary.com/v1_1/ds0zewglg/image/upload"),n.onload=()=>{if(200===n.status){document.getElementById("loading1").style.display="none";var e=JSON.parse(n.response);document.getElementById("plu").src=e.secure_url}else alert("Upload failed. Please try agian.")},document.getElementById("loading1").style.display="inline-block",n.send(e)}var baseUrl="https://marakesh-api.herokuapp.com";function createEvents(){var e=new XMLHttpRequest,t=`${baseUrl}/api/events`,n=JSON.stringify({name:document.querySelector("#eventName").value,createdBy:JSON.parse(localStorage.getItem("data")).id,logoUrl:document.querySelector("#logo").src,message:document.querySelector("#message2").value,description:document.querySelector("#description").value,submitMessage:document.querySelector("#submitMessage").value,ratingMessage:document.querySelector("#rating1").value,pluLink:document.querySelector("#plu").src});console.log(JSON.parse(n),"parrrams"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(events=e.responseText,document.getElementById("loading3").style.display="none",localStorage.setItem("events",events),console.log(e,"events"))},document.getElementById("loading3").style.display="inline-block",e.send(n)}var tring=JSON.parse(localStorage.getItem("events"));console.log(tring,"tttii");var globalCounter=0,tbody=document.getElementById("tbody");function example(){var e=JSON.parse(localStorage.getItem("events")),t=document.createElement("table");t.id="dataTable",console.log(t,"tabll");var n=document.createElement("thead");t.appendChild(n);var a=document.createElement("tbody");t.appendChild(a);var o=document.createElement("tr"),l=(document.createElement("th"),document.createElement("th")),d=document.createElement("th"),r=document.createElement("th"),s=document.createElement("th"),i=document.createElement("th"),c=document.createElement("th");l.innerHTML="Name",d.innerHTML="Logo",r.innerHTML="Message",s.innerHTML="Description",i.innerHTML="Rating Message",c.innerHTML="Attendant Page",o.appendChild(l),o.appendChild(r),o.appendChild(s),o.appendChild(i),o.appendChild(d),o.appendChild(c),n.appendChild(o);for(var p=0;p<e.length;p++){var m=e[p].id,u=e[p].name,g=e[p].logoUrl,y=e[p].ratingMessage,h=e[p].description,v=e[p].message,E=e[p].pluLink,f=document.createElement("tr"),S=document.createElement("th"),I=document.createElement("th"),b=document.createElement("th"),C=document.createElement("th"),T=document.createElement("th"),B=document.createElement("input");B.setAttribute("type","button"),B.setAttribute("name","Open"),B.setAttribute("value","Open"),B.classList.add("btn-primary"),B.addEventListener("click",function(e){e.preventDefault(),window.open(`/attendant-reg.html?id=${m}&name=${u}&logoUrl=${g}&ratingMessage=${y}&description=${h}&message=${v}&pluLink=${E}`)},!1);var L=document.createElement("img");L.src=g,L.width="100",L.height="70",S.appendChild(document.createTextNode(u)),b.appendChild(document.createTextNode(v)),C.appendChild(document.createTextNode(h)),T.appendChild(document.createTextNode(y)),I.appendChild(L),f.appendChild(S),f.appendChild(b),f.appendChild(C),f.appendChild(T),f.appendChild(I),f.appendChild(B),a.appendChild(f)}document.querySelector("#dataTable").appendChild(t)}function login(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/login`,n=JSON.stringify({email:document.getElementById("exampleLoginEmail").value,password:document.getElementById("exampleLoginPassword").value});console.log(n,"params"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(data=e.responseText,document.getElementById("loading").innerHTML="","undefined"!=typeof Storage&&localStorage.setItem("data",data),window.location.href="/dashboard.html",console.log(e,"data"))},document.getElementById("loading").innerHTML='<img src="https://sabarimala.keralartc.com/img/loading.gif" />',e.send(n)}function logout(){localStorage.clear(),window.location.href="/"}function register(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/register`,n=JSON.stringify({name:document.getElementById("exampleInputName").value,email:document.getElementById("exampleInputEmail").value,password:document.getElementById("exampleInputPassword").value});console.log(n,"params"),e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4==e.readyState&&201==e.status?(data=e.responseText,document.getElementById("loading").innerHTML="",window.location.href="/index.html",console.log(e,"data")):console.log(e,"error")},document.getElementById("loading").innerHTML='<img src="https://sabarimala.keralartc.com/img/loading.gif" />',e.send(n)}function getEvents(){var e=new XMLHttpRequest,t=`${baseUrl}/api/users/${JSON.parse(localStorage.getItem("data")).id}`;e.open("GET",t,!0);const n=JSON.parse(localStorage.getItem("data")).token;e.setRequestHeader("Authorization","Bearer "+n),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(userEvents=JSON.parse(e.responseText),events=userEvents.events,document.getElementById("loading3").style.display="none","undefined"!=typeof Storage&&localStorage.setItem("events",JSON.stringify(events)),console.log(events,"events"))},document.getElementById("loading3").style.display="inline-block",e.send()}function displayContent(){var e=document.querySelector("#displayName");if(localStorage.getItem("data")){let t=JSON.parse(localStorage.getItem("data"));e.textContent=t.name}getEvents(),example()}document.body.onload=displayContent;